<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCTV Systems - A&B Innovation</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/index.css">
</head>
<body class="min-h-screen bg-gray-50">
  <nav class="bg-white text-gray-900 shadow-lg sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-8 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex items-center">
        <img src="/assets/product/A&B.jpeg" alt="A&B Innovation  logo" class="h-12 w-auto bg-transparent">
      </div>

      <div class="hidden md:flex space-x-8">
        <a href="/" class="text-blue-400 hover:text-green-400 transition">Home</a>
        <a href="/services/" class="text-blue-400 hover:text-green-400 transition">Services</a>
        <a href="/about/" class="text-blue-400 hover:text-green-400 transition">About Us</a>
        <a href="/gallery/" class="text-blue-400 hover:text-green-400 transition">Gallery</a>
        <a href="/products/" class="text-blue-400 hover:text-green-400 transition">Products</a>
        <a href="/contact/" class="text-blue-400 hover:text-green-400 transition">Contact Us</a>
      </div>

      <div class="hidden md:flex items-center space-x-4">
        <button type="button" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 transition focus:outline-none focus:ring-2 focus:ring-blue-400" data-search-trigger>
          <span class="sr-only">Search catalog</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"></path>
          </svg>
        </button>
        <a href="tel:+250788123456" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold transition">
          Call Now
        </a>
      </div>

      <div class="flex items-center space-x-3 md:hidden">
        <button type="button" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 transition focus:outline-none focus:ring-2 focus:ring-blue-400" data-search-trigger>
          <span class="sr-only">Search catalog</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"></path>
          </svg>
        </button>
        <button type="button" class="md:hidden" id="mobile-menu-button">
          <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="md:hidden bg-white hidden border-t border-gray-200" id="mobile-menu">
    <div class="px-2 pt-2 pb-3 space-y-1">
      <button type="button" class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold" data-search-trigger>
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"></path>
        </svg>
        Search catalog
      </button>
      <a href="/" class="block px-3 py-2 rounded hover:bg-gray-100">Home</a>
      <a href="/services/" class="block px-3 py-2 rounded hover:bg-gray-100">Services</a>
      <a href="/about/" class="block px-3 py-2 rounded hover:bg-gray-100">About Us</a>
      <a href="/gallery/" class="block px-3 py-2 rounded hover:bg-gray-100">Gallery</a>
      <a href="/products/" class="block px-3 py-2 rounded hover:bg-gray-100">Products</a>
      <a href="/contact/" class="block px-3 py-2 rounded hover:bg-gray-100">Contact Us</a>
    </div>
  </div>
</nav>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });
</script>

  <div id="global-search-overlay" class="hidden fixed inset-0 bg-slate-900 bg-opacity-80 backdrop-blur-sm flex items-start justify-center px-4 py-12" style="z-index: 60;">
    <div class="w-full max-w-3xl bg-white rounded-3xl shadow-2xl p-8 relative">
      <div class="flex items-start justify-between space-x-4">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-blue-500">Quick lookup</p>
          <h2 class="text-2xl font-semibold text-gray-900 mt-1">Search products & services</h2>
          <p class="text-sm text-gray-500">Type at least two letters to filter the catalog. Press Enter to open the top match.</p>
        </div>
        <button type="button" class="p-2 rounded-full hover:bg-gray-100 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500" data-search-close>
          <span class="sr-only">Close search</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="relative mt-6">
        <input id="global-search-input" type="text" placeholder="Search devices, services, accessories..." class="w-full border border-gray-200 rounded-2xl pl-12 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900" autocomplete="off" />
        <svg class="w-5 h-5 absolute left-4 top-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"></path>
        </svg>
      </div>
      <div id="global-search-results" class="mt-6 space-y-3 max-h-80 overflow-y-auto pr-1">
        <p class="text-sm text-gray-500">Start typing to see matching items.</p>
      </div>
      <button type="button" class="mt-6 w-full flex items-center justify-center border border-gray-200 rounded-2xl py-2 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition" data-search-close>
        Close search overlay
      </button>
    </div>
  </div>
  <main>
    
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
  <div class="mb-8">
    <a href="/services/" class="text-blue-600 hover:text-blue-800 mb-4 inline-block">&larr; Back to Services</a>
    <h1 class="text-4xl font-bold mb-4">CCTV Systems</h1>
    <p class="text-xl text-gray-600">Professional surveillance solutions for complete security</p>
  </div>

  <!-- Hero Image -->
  <div class="mb-12">
    <img src="/assets/product/cctv1.jpg" alt="CCTV Systems" class="w-full rounded-lg shadow-lg" />
  </div>

  <!-- Overview Section -->
  <div class="mb-16">
    <h2 class="text-3xl font-bold mb-6">Advanced Surveillance Solutions</h2>
    <p class="text-gray-700 text-lg leading-relaxed mb-6">
      Our CCTV systems provide comprehensive surveillance solutions with HD cameras, remote monitoring capabilities, and 24/7 recording. We specialize in installing and maintaining surveillance systems for homes, businesses, and industrial facilities throughout Rwanda. Our expert team ensures that your property is protected with the latest technology and reliable performance.
    </p>
    <p class="text-gray-700 text-lg leading-relaxed">
      From residential security to large-scale commercial installations, we offer tailored CCTV solutions that meet your specific security needs. Our systems include high-definition cameras, intelligent video analytics, and seamless integration with other security systems for maximum protection.
    </p>
  </div>

  <!-- Services Grid -->
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">HD & 4K Cameras</h3>
      <p class="text-gray-600">Crystal clear video quality with advanced optics and night vision capabilities</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">Remote Monitoring</h3>
      <p class="text-gray-600">Access your cameras from anywhere using our mobile apps and web interface</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">24/7 Recording</h3>
      <p class="text-gray-600">Continuous recording with intelligent storage management and backup systems</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">Motion Detection</h3>
      <p class="text-gray-600">Smart motion detection with instant alerts and customizable sensitivity</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">System Integration</h3>
      <p class="text-gray-600">Seamless integration with alarms, access control, and other security systems</p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
      <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold mb-2">Maintenance & Support</h3>
      <p class="text-gray-600">Comprehensive maintenance packages and 24/7 technical support</p>
    </div>
  </div>

  <!-- Gallery Section -->
  <div class="mb-16">
    <h2 class="text-3xl font-bold mb-8">Our CCTV Installations</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div class="relative overflow-hidden rounded-lg shadow-lg group">
        <img src="https://images.unsplash.com/photo-1557324232-b8917d3c3dcb?w=600&h=400&fit=crop" alt="Commercial CCTV Installation" class="w-full h-64 object-cover group-hover:scale-110 transition duration-300" />
        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition duration-300 flex items-center justify-center">
          <span class="text-white font-semibold opacity-0 group-hover:opacity-100 transition duration-300">Commercial Installation</span>
        </div>
      </div>
      <div class="relative overflow-hidden rounded-lg shadow-lg group">
        <img src="https://images.unsplash.com/photo-1581092918484-8313e1f7e8d6?w=600&h=400&fit=crop" alt="Residential CCTV Installation" class="w-full h-64 object-cover group-hover:scale-110 transition duration-300" />
        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition duration-300 flex items-center justify-center">
          <span class="text-white font-semibold opacity-0 group-hover:opacity-100 transition duration-300">Residential Installation</span>
        </div>
      </div>
      <div class="relative overflow-hidden rounded-lg shadow-lg group">
        <img src="https://images.unsplash.com/photo-1544197150-b99a580bb7a8?w=600&h=400&fit=crop" alt="Industrial CCTV Installation" class="w-full h-64 object-cover group-hover:scale-110 transition duration-300" />
        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition duration-300 flex items-center justify-center">
          <span class="text-white font-semibold opacity-0 group-hover:opacity-100 transition duration-300">Industrial Installation</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Call to Action -->
  <div class="bg-blue-600 text-white rounded-lg p-8 text-center">
    <h2 class="text-3xl font-bold mb-4">Ready to Secure Your Property?</h2>
    <p class="text-xl mb-6 text-blue-100">Get a free consultation and custom CCTV solution for your security needs</p>
    <a href="/contact/" class="bg-white text-blue-600 hover:bg-gray-100 px-8 py-4 rounded-lg font-semibold transition inline-block">
      Get CCTV Consultation
    </a>
  </div>
</div>

  </main>
  <div id="whatsapp-cart" class="hidden fixed bottom-4 right-4 w-full max-w-sm px-4 sm:px-0 z-40">
    <div class="bg-white border border-gray-200 shadow-2xl rounded-2xl p-4 space-y-4">
      <div class="flex items-center justify-between gap-4">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-blue-500">WhatsApp Cart</p>
          <p class="text-lg font-semibold text-gray-900" data-cart-count>0 items selected</p>
        </div>
        <button type="button" class="text-xs text-gray-500 hover:text-gray-700 font-semibold" data-cart-clear>Clear</button>
      </div>
      <p class="text-sm text-gray-600" data-cart-preview>Add products to get started.</p>
      <p class="text-sm font-semibold text-gray-900" data-cart-total-label></p>
      <div class="flex flex-col sm:flex-row gap-2">
        <a href="/contact/" class="flex-1 inline-flex items-center justify-center border border-gray-200 rounded-lg px-3 py-2 text-sm font-semibold text-gray-700 hover:border-gray-300 transition" data-cart-review>Review items</a>
        <button type="button" class="flex-1 inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white rounded-lg px-3 py-2 text-sm font-semibold transition" data-cart-send disabled>Send on WhatsApp</button>
      </div>
    </div>
  </div>
  <section class="bg-blue-50 border-t border-blue-100">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-sm text-blue-900 space-y-2">
      <p><strong>Payment policy:</strong> Pay after receiving standard products. For delivery + installation, settle 50% before dispatch and the remaining 50% once installation is completed. Installations outside Kigali can be negotiated.</p>
      <p><strong>Installation-only:</strong> If you prefer A&B Innovation  to install equipment you already have on site, services are available and priced on a negotiated rate.</p>
    </div>
  </section>
  <footer class="bg-slate-900 text-white py-8 mt-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center">
      <h2 class="text-2xl font-bold text-blue-400 mb-2">A&B Innovation</h2>
      <p class="text-gray-400 mb-4">Professional Technical Services You Can Trust</p>
      <p class="text-gray-500 text-sm">
        Â© 2024 A&B Innovation. All rights reserved.
      </p>
    </div>
  </div>
</footer>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script id="global-search-data" type="application/json">
        []

  </script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const overlay = document.getElementById('global-search-overlay');
      const input = document.getElementById('global-search-input');
      const results = document.getElementById('global-search-results');
      const dataElement = document.getElementById('global-search-data');
      if (!overlay || !input || !results || !dataElement) {
        return;
      }

      let staticEntries = [];
      try {
        staticEntries = JSON.parse(dataElement.textContent.trim()) || [];
      } catch (error) {
        console.error('Failed to parse search index', error);
      }
      let searchIndex = staticEntries.slice();
      let indexReady = false;
      const remoteIndexUrl = '/assets/search-index.json';
      let remoteIndexPromise = null;

      const triggers = document.querySelectorAll('[data-search-trigger]');
      const closeButtons = overlay.querySelectorAll('[data-search-close]');

      const fetchRemoteIndex = () => {
        if (!remoteIndexPromise) {
          remoteIndexPromise = fetch(remoteIndexUrl, { cache: 'force-cache' })
            .then(response => response.ok ? response.json() : [])
            .catch(() => []);
        }
        return remoteIndexPromise;
      };

      const collectDynamicEntries = () => {
        return Array.from(document.querySelectorAll('[data-search-entry]')).map(node => {
          const title = (node.dataset.searchTitle || node.getAttribute('data-search-title') || '').trim();
          const url = (node.dataset.searchUrl || node.getAttribute('data-search-url') || '').trim();
          if (!title || !url) {
            return null;
          }
          return {
            title,
            category: (node.dataset.searchCategory || node.getAttribute('data-search-category') || 'Products').trim(),
            description: (node.dataset.searchDescription || node.getAttribute('data-search-description') || '').trim(),
            url
          };
        }).filter(Boolean);
      };

      const refreshSearchIndex = () => {
        indexReady = false;
        return fetchRemoteIndex().then(remoteEntries => {
          const unique = new Map();
          [...staticEntries, ...(remoteEntries || []), ...collectDynamicEntries()].forEach(item => {
            const key = `${item.title}-${item.url}`;
            if (!unique.has(key)) {
              unique.set(key, item);
            }
          });
          searchIndex = Array.from(unique.values());
          indexReady = true;
        }).catch(() => {
          const unique = new Map();
          [...staticEntries, ...collectDynamicEntries()].forEach(item => {
            const key = `${item.title}-${item.url}`;
            if (!unique.has(key)) {
              unique.set(key, item);
            }
          });
          searchIndex = Array.from(unique.values());
          indexReady = true;
        });
      };

      const lockScroll = (shouldLock) => {
        document.body.classList.toggle('overflow-hidden', shouldLock);
      };

      const openOverlay = () => {
        overlay.classList.remove('hidden');
        input.value = '';
        results.innerHTML = '<p class="text-sm text-gray-500">Loading search index...</p>';
        lockScroll(true);
        setTimeout(() => input.focus(), 100);
        refreshSearchIndex().then(() => renderResults(''));
      };

      const closeOverlay = () => {
        overlay.classList.add('hidden');
        lockScroll(false);
      };

      const getMatches = (term) => {
        if (!term) {
          return searchIndex.slice(0, 12);
        }
        const q = term.toLowerCase();
        return searchIndex.filter(item => {
          return `${item.title} ${item.description} ${item.category} ${item.keywords || ''}`.toLowerCase().includes(q);
        }).slice(0, 12);
      };

      const renderResults = (term) => {
        const matches = getMatches(term);
        if (!matches.length) {
          results.innerHTML = '<p class="text-sm text-gray-500">No matches yet. Try refining your keywords.</p>';
          return;
        }

        results.innerHTML = matches.map(item => `
          <a href="${item.url}" class="block border border-gray-200 rounded-2xl px-4 py-3 hover:border-blue-500 hover:-translate-y-0.5 transition transform">
            <div class="flex items-center justify-between text-xs uppercase tracking-wide text-blue-500">
              <span>${item.category}</span>
              <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
            <p class="text-lg font-semibold text-gray-900 mt-1">${item.title}</p>
            <p class="text-sm text-gray-500 mt-1">${item.description}</p>
          </a>
        `).join('');
      };

      triggers.forEach(button => button.addEventListener('click', () => openOverlay()));
      closeButtons.forEach(button => button.addEventListener('click', () => closeOverlay()));

      overlay.addEventListener('click', (event) => {
        if (event.target === overlay) {
          closeOverlay();
        }
      });

      input.addEventListener('input', (event) => {
        if (!indexReady) {
          results.innerHTML = '<p class="text-sm text-gray-500">Loading search index...</p>';
          return;
        }
        renderResults(event.target.value.trim());
      });

      document.addEventListener('keydown', (event) => {
        if (overlay.classList.contains('hidden')) {
          return;
        }
        if (event.key === 'Escape') {
          closeOverlay();
        }
        if (event.key === 'Enter') {
          if (!indexReady) {
            return;
          }
          const firstResult = results.querySelector('a');
          if (firstResult) {
            firstResult.click();
          }
        }
      });
    });
  </script>
  <script>
    (function() {
      const CART_STORAGE_KEY = 'technicpro-cart-items';
      const WHATSAPP_NUMBER = '250785576541';
      const DEFAULT_MESSAGE = 'Hello, I would like to speak with A&B Innovation  about your products and services.';
      const subscribers = new Set();
      const state = {
        cart: []
      };

      const parsePriceText = (value) => {
        if (value === undefined || value === null) {
          return null;
        }
        const numeric = String(value).replace(/[^0-9.]/g, '');
        if (!numeric) {
          return null;
        }
        const parsed = parseFloat(numeric);
        return Number.isFinite(parsed) ? parsed : null;
      };

      const formatCurrency = (amount) => {
        if (typeof amount !== 'number' || !Number.isFinite(amount) || amount <= 0) {
          return '';
        }
        return `RWF ${Math.round(amount).toLocaleString('en-US')}`;
      };

      const normalizeItem = (item) => {
        if (!item) {
          return null;
        }
        const normalized = Object.assign({}, item);
        const parsedAmount = typeof normalized.amount === 'number' && Number.isFinite(normalized.amount)
          ? normalized.amount
          : parsePriceText(normalized.price);
        normalized.amount = parsedAmount || null;
        return normalized;
      };

      const readCartFromStorage = () => {
        try {
          const stored = sessionStorage.getItem(CART_STORAGE_KEY);
          if (!stored) {
            return [];
          }
          const parsed = JSON.parse(stored);
          if (Array.isArray(parsed)) {
            return parsed.map(normalizeItem).filter(item => item && item.id);
          }
          return [];
        } catch (error) {
          console.warn('Unable to read cart state', error);
          return [];
        }
      };

      state.cart = readCartFromStorage();

      const persistCart = () => {
        try {
          sessionStorage.setItem(CART_STORAGE_KEY, JSON.stringify(state.cart));
        } catch (error) {
          console.warn('Unable to persist cart selection', error);
        }
      };

      const getItems = () => state.cart.slice();
      const getCartTotal = () => state.cart.reduce((sum, item) => sum + (item.amount || 0), 0);

      const findIndex = (id) => {
        if (!id) {
          return -1;
        }
        return state.cart.findIndex(item => item.id === id);
      };

      const buildCartMessage = (items) => {
        if (!items || !items.length) {
          return DEFAULT_MESSAGE;
        }
        const lines = [
          'Hello, I would like to discuss the following A&B Innovation  items:',
          ''
        ];
        items.forEach((item, index) => {
          const displayPrice = item.price || (item.amount ? formatCurrency(item.amount) : '');
          lines.push(`${index + 1}. ${item.title || 'Unnamed item'}${displayPrice ? ` (${displayPrice})` : ''}`);
          if (item.category) {
            lines.push(`   Category: ${item.category}`);
          }
          if (item.description) {
            lines.push(`   Details: ${item.description}`);
          }
          if (item.url) {
            lines.push(`   Link: ${item.url}`);
          }
          lines.push('');
        });
        lines.push('Please advise pricing, delivery, and installation support.');
        return lines.join('\n');
      };

      const updateToggleButtons = () => {
        const items = getItems();
        document.querySelectorAll('[data-cart-toggle]').forEach((button) => {
          const id = button.getAttribute('data-cart-id');
          const isSelected = findIndex(id) !== -1;
          const label = button.querySelector('[data-cart-label]');
          if (label) {
            label.textContent = isSelected ? 'Added to WhatsApp cart' : 'Add to WhatsApp cart';
          }
          button.classList.toggle('bg-green-600', isSelected);
          button.classList.toggle('text-white', isSelected);
          button.classList.toggle('border-green-600', isSelected);
          button.classList.toggle('border-gray-300', !isSelected);
          button.classList.toggle('text-gray-900', !isSelected);
        });
      };

      const updateFloatingWidget = () => {
        const wrapper = document.getElementById('whatsapp-cart');
        if (!wrapper) {
          return;
        }
        const count = state.cart.length;
        wrapper.classList.toggle('hidden', count === 0);
        const countNode = wrapper.querySelector('[data-cart-count]');
        if (countNode) {
          countNode.textContent = count ? `${count} item${count === 1 ? '' : 's'} selected` : '0 items selected';
        }
        const previewNode = wrapper.querySelector('[data-cart-preview]');
        if (previewNode) {
          if (!count) {
            previewNode.textContent = 'Add products to get started.';
          } else {
            const titles = state.cart.map(item => item.title || 'Unnamed item').slice(0, 3);
            previewNode.textContent = titles.join(', ') + (count > 3 ? ` +${count - 3} more` : '');
          }
        }
        const totalNode = wrapper.querySelector('[data-cart-total-label]');
        if (totalNode) {
          const totalAmount = getCartTotal();
          totalNode.textContent = totalAmount ? `Estimated total: ${formatCurrency(totalAmount)}` : 'Estimated total: --';
        }
        const sendButton = wrapper.querySelector('[data-cart-send]');
        if (sendButton) {
          sendButton.disabled = count === 0;
          sendButton.classList.toggle('opacity-50', count === 0);
          sendButton.classList.toggle('cursor-not-allowed', count === 0);
        }
      };

      const notify = () => {
        updateToggleButtons();
        updateFloatingWidget();
        subscribers.forEach((callback) => {
          try {
            callback(getItems());
          } catch (error) {
            console.warn('Cart subscriber error', error);
          }
        });
      };

      const addItem = (item) => {
        const normalized = normalizeItem(item);
        if (!normalized || !normalized.id) {
          return;
        }
        const index = findIndex(normalized.id);
        if (index === -1) {
          state.cart.push(normalized);
        } else {
          state.cart[index] = Object.assign({}, state.cart[index], normalized);
        }
        persistCart();
        notify();
      };

      const removeItem = (id) => {
        const index = findIndex(id);
        if (index === -1) {
          return;
        }
        state.cart.splice(index, 1);
        persistCart();
        notify();
      };

      const toggleItem = (item) => {
        if (!item || !item.id) {
          return;
        }
        if (findIndex(item.id) === -1) {
          addItem(item);
        } else {
          removeItem(item.id);
        }
      };

      const clearCart = () => {
        if (!state.cart.length) {
          return;
        }
        state.cart = [];
        persistCart();
        notify();
      };

      const readItemFromNode = (node) => {
        const get = (attr, fallbackAttr) => node.getAttribute(attr) || (fallbackAttr ? node.getAttribute(fallbackAttr) : '') || '';
        const title = get('data-cart-title', 'data-order-title');
        const id = get('data-cart-id') || `${title}-${get('data-cart-price', 'data-order-price')}`;
        return normalizeItem({
          id,
          title,
          price: get('data-cart-price', 'data-order-price'),
          description: get('data-cart-desc', 'data-order-desc'),
          image: get('data-cart-img', 'data-order-img'),
          category: get('data-cart-category', 'data-order-category'),
          url: get('data-cart-url') || node.getAttribute('href') || window.location.href
        });
      };

      const sendCartToWhatsApp = () => {
        const message = buildCartMessage(getItems());
        const encoded = encodeURIComponent(message.trim());
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encoded}`;
        window.open(url, '_blank');
      };

      document.addEventListener('click', (event) => {
        const toggle = event.target.closest('[data-cart-toggle]');
        if (toggle) {
          event.preventDefault();
          toggleItem(readItemFromNode(toggle));
          return;
        }
        const clearButton = event.target.closest('[data-cart-clear]');
        if (clearButton) {
          event.preventDefault();
          clearCart();
          return;
        }
        const sendButton = event.target.closest('[data-cart-send]');
        if (sendButton) {
          event.preventDefault();
          if (getItems().length) {
            sendCartToWhatsApp();
          }
        }
      });

      window.technicproCart = {
        getItems,
        getTotal: () => getCartTotal(),
        addItem,
        removeItem,
        toggleItem,
        clear: clearCart,
        buildMessage: buildCartMessage,
        formatCurrency,
        subscribe: (callback) => {
          if (typeof callback !== 'function') {
            return () => {};
          }
          subscribers.add(callback);
          return () => subscribers.delete(callback);
        }
      };

      notify();
    })();
  </script>
</body>
</html>
